{"version":3,"sources":["../src/HyperlistProxy.js"],"sourcesContent":["import Hyperlist from \"../dist/Hyperlist\";\nimport HypermapProxy from \"../dist/HypermapProxy\";\n\nexport default class HyperlistProxy extends Hyperlist {\n\ttab;\n\n\tstatic hypermapFromProxy(object, parent) {\n\t\tconst hypermap = HypermapProxy.fromLiteral(object, parent);\n\t\thypermap.tab = this.tab;\n\t\treturn hypermap;\n\t}\n\n\tasync $(key, body) {\n\t\tconst node = this.at(key);\n\t\tconst page = this.tab.page;\n\n\t\tlet promises = [\n\t\t\tpage.evaluate(async (path, body) => {\n\t\t\t\tconst innerNode = globalThis.hypermap.at(...path);\n\t\t\t\tif (body) {\n\t\t\t\t\tObject.entries(body).forEach((value, key) => {\n\t\t\t\t\t\tinnerNode.set(key, value);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tawait innerNode.fetch();\n\t\t\t}, node.path(), body)\n\t\t];\n\n\t\tif (!node.attributes.rels?.includes('transclude')) {\n\t\t\tpromises.push(page.waitForNavigation());\n\t\t}\n\t\t\n\t\tawait Promise.all(promises);\n\t\tawait this.tab.syncData();\n\t}\n}\n"],"names":["HyperlistProxy","Hyperlist","tab","hypermapFromProxy","object","parent","hypermap","HypermapProxy","fromLiteral","$","key","body","node","at","page","promises","evaluate","path","innerNode","globalThis","Object","entries","forEach","value","set","fetch","attributes","rels","includes","push","waitForNavigation","Promise","all","syncData"],"mappings":";;;;+BAGA;;aAAqBA;;kEAHC;sEACI;;;;;;AAEX,MAAMA,uBAAuBC,kBAAS;IACpDC,IAAI;IAEJ,OAAOC,kBAAkBC,MAAM,EAAEC,MAAM,EAAE;QACxC,MAAMC,WAAWC,sBAAa,CAACC,WAAW,CAACJ,QAAQC;QACnDC,SAASJ,GAAG,GAAG,IAAI,CAACA,GAAG;QACvB,OAAOI;IACR;IAEA,MAAMG,EAAEC,GAAG,EAAEC,IAAI,EAAE;QAClB,MAAMC,OAAO,IAAI,CAACC,EAAE,CAACH;QACrB,MAAMI,OAAO,IAAI,CAACZ,GAAG,CAACY,IAAI;QAE1B,IAAIC,WAAW;YACdD,KAAKE,QAAQ,CAAC,OAAOC,MAAMN,OAAS;gBACnC,MAAMO,YAAYC,WAAWb,QAAQ,CAACO,EAAE,IAAII;gBAC5C,IAAIN,MAAM;oBACTS,OAAOC,OAAO,CAACV,MAAMW,OAAO,CAAC,CAACC,OAAOb,MAAQ;wBAC5CQ,UAAUM,GAAG,CAACd,KAAKa;oBACpB;gBACD,CAAC;gBACD,MAAML,UAAUO,KAAK;YACtB,GAAGb,KAAKK,IAAI,IAAIN;SAChB;QAED,IAAI,CAACC,KAAKc,UAAU,CAACC,IAAI,EAAEC,SAAS,eAAe;YAClDb,SAASc,IAAI,CAACf,KAAKgB,iBAAiB;QACrC,CAAC;QAED,MAAMC,QAAQC,GAAG,CAACjB;QAClB,MAAM,IAAI,CAACb,GAAG,CAAC+B,QAAQ;IACxB;AACD"}